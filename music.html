<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iTunes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lucida Grande', Arial, sans-serif;
            font-size: 11px;
            background: #f0f0f0;
            height: 100vh;
            overflow: hidden;
        }

        .itunes-window {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: #e8e8e8;
            border: 1px solid #999;
        }

        .title-bar {
            height: 22px;
            background: linear-gradient(to bottom, #f0f0f0 0%, #d0d0d0 100%);
            border-bottom: 1px solid #999;
            display: flex;
            align-items: center;
            padding: 0 8px;
            position: relative;
        }

        .traffic-lights {
            display: flex;
            gap: 8px;
        }

        .traffic-light {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 1px solid #999;
        }

        .close { background: #ff5f56; }
        .minimize { background: #ffbd2e; }
        .maximize { background: #27ca3f; }

        .window-title {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            color: #333;
        }

        .toolbar {
            height: 40px;
            background: linear-gradient(to bottom, #f8f8f8 0%, #e0e0e0 100%);
            border-bottom: 1px solid #999;
            display: flex;
            align-items: center;
            padding: 0 8px;
            gap: 8px;
            position: relative;
            z-index: 200;
        }

        .control-button {
            width: 24px;
            height: 24px;
            border-radius: 3px;
            border: 1px solid #999;
            background: linear-gradient(to bottom, #f8f8f8 0%, #d8d8d8 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 10px;
            color: #333;
        }

        .control-button:hover {
            background: linear-gradient(to bottom, #fff 0%, #e0e0e0 100%);
        }

        .search-box {
            margin-left: auto;
            width: 150px;
            height: 20px;
            border: 1px solid #999;
            border-radius: 10px;
            padding: 0 8px;
            font-size: 11px;
        }

        .main-content {
            flex: 1;
            display: flex;
            background: #fff;
            position: relative;
            z-index: 1;
        }

        .sidebar {
            width: 200px;
            min-width: 200px;
            max-width: 200px;
            background: linear-gradient(to bottom, #e8e8e8 0%, #d8d8d8 100%);
            border-right: 1px solid #999;
            padding: 8px 0;
            overflow-y: auto;
            position: relative;
            z-index: 100;
        }

        .sidebar-section {
            margin-bottom: 16px;
        }

        .sidebar-header {
            font-weight: bold;
            color: #333;
            padding: 4px 12px;
            font-size: 10px;
            text-transform: uppercase;
            color: #666;
        }

        .sidebar-item {
            padding: 2px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            color: #333;
        }

        .sidebar-item:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .sidebar-item.selected {
            background: linear-gradient(to bottom, #3875d7 0%, #2a5aa0 100%);
            color: white;
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
        }

        .sidebar-icon {
            width: 16px;
            height: 16px;
            display: inline-block;
        }

        .content-area {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
        }

        .coverflow-container {
            height: 300px;
            background: linear-gradient(to bottom, #2a2a2a 0%, #1a1a1a 100%);
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px;
            border-bottom: 1px solid #999;
            overflow: hidden;
            z-index: 1;
        }

        .coverflow-stage {
            position: relative;
            width: 100%;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            transform-style: preserve-3d;
        }

        .album-cover {
            position: absolute;
            width: 150px;
            height: 150px;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-origin: center bottom;
            border-radius: 4px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.6);
        }

        .album-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 4px;
            display: block;
        }

        .album-cover::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, 
                rgba(255,255,255,0.2) 0%, 
                rgba(255,255,255,0.1) 30%, 
                transparent 100%);
            transform: rotateX(180deg) scaleY(0.6);
            transform-origin: top;
            border-radius: 4px;
            opacity: 0.4;
            filter: blur(1px);
            z-index: -1;
        }

        .album-cover.active {
            transform: translateZ(50px) scale(1.3);
            z-index: 10;
            filter: brightness(1.1);
        }

        .album-cover.left-1 {
            transform: translateX(-120px) rotateY(45deg) translateZ(-30px) scale(0.9);
            z-index: 9;
            opacity: 0.9;
        }

        .album-cover.left-2 {
            transform: translateX(-200px) rotateY(60deg) translateZ(-60px) scale(0.75);
            z-index: 8;
            opacity: 0.7;
        }

        .album-cover.left-far {
            transform: translateX(-280px) rotateY(70deg) translateZ(-90px) scale(0.6);
            z-index: 7;
            opacity: 0.5;
        }

        .album-cover.right-1 {
            transform: translateX(120px) rotateY(-45deg) translateZ(-30px) scale(0.9);
            z-index: 9;
            opacity: 0.9;
        }

        .album-cover.right-2 {
            transform: translateX(200px) rotateY(-60deg) translateZ(-60px) scale(0.75);
            z-index: 8;
            opacity: 0.7;
        }

        .album-cover.right-far {
            transform: translateX(280px) rotateY(-70deg) translateZ(-90px) scale(0.6);
            z-index: 7;
            opacity: 0.5;
        }

        .coverflow-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }

        .album-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .album-artist {
            font-size: 12px;
            color: #ccc;
        }

        .track-list {
            flex: 1;
            background: #fff;
            overflow: hidden;
            position: relative;
            z-index: 50;
        }

        .track-list-header {
            height: 20px;
            background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%);
            border-bottom: 1px solid #999;
            display: flex;
            align-items: center;
            font-size: 11px;
            font-weight: bold;
            color: #333;
        }

        .column-header {
            padding: 0 8px;
            border-right: 1px solid #ccc;
            cursor: pointer;
            display: flex;
            align-items: center;
            height: 100%;
        }

        .column-header:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .col-name { width: 250px; }
        .col-time { width: 60px; }
        .col-artist { width: 150px; }
        .col-album { width: 150px; }
        .col-genre { flex: 1; }

        .track-list-body {
            height: calc(100% - 20px);
            overflow-y: auto;
        }

        .track-row {
            height: 18px;
            display: flex;
            align-items: center;
            font-size: 11px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
        }

        .track-row:nth-child(even) {
            background: #f8f8f8;
        }

        .track-row:hover {
            background: #e0e0ff;
        }

        .track-row.selected {
            background: linear-gradient(to bottom, #3875d7 0%, #2a5aa0 100%);
            color: white;
            width: 730px;
            min-width: 730px;
        }

        .track-cell {
            padding: 0 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex-shrink: 0;
            box-sizing: border-box;
        }

        .track-cell.col-name { width: 250px; min-width: 250px; max-width: 250px; }
        .track-cell.col-time { width: 60px; min-width: 60px; max-width: 60px; }
        .track-cell.col-artist { width: 150px; min-width: 150px; max-width: 150px; }
        .track-cell.col-album { width: 150px; min-width: 150px; max-width: 150px; }
        .track-cell.col-genre { width: 120px; min-width: 120px; max-width: 120px; }

        .status-bar {
            height: 20px;
            background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%);
            border-top: 1px solid #999;
            display: flex;
            align-items: center;
            padding: 0 8px;
            font-size: 10px;
            color: #666;
        }

        .coverflow-controls {
            position: absolute;
            bottom: 50px;
            right: 20px;
            display: flex;
            gap: 4px;
        }

        .coverflow-nav {
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        .coverflow-nav:hover {
            background: rgba(255, 255, 255, 0.3);
        }
    </style>
    
</head>
<body>
    <div class="itunes-window">
        <div class="title-bar">
            <div class="traffic-lights">
                <div class="traffic-light close"></div>
                <div class="traffic-light minimize"></div>
                <div class="traffic-light maximize"></div>
            </div>
            <div class="window-title">iTunes</div>
        </div>

        <div class="toolbar">
            <div class="control-button">‚óÄ‚óÄ</div>
            <div class="control-button">‚ñ∂</div>
            <div class="control-button">‚ñ∂‚ñ∂</div>
            <div style="width: 1px; height: 20px; background: #999; margin: 0 4px;"></div>
            <input type="text" class="search-box" placeholder="Search">
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="sidebar-section">
                    <div class="sidebar-header">Library</div>
                    <div class="sidebar-item selected">
                        <span class="sidebar-icon">üéµ</span>
                        Music
                    </div>
                    <div class="sidebar-item">
                        <span class="sidebar-icon">üé¨</span>
                        Movies
                    </div>
                    <div class="sidebar-item">
                        <span class="sidebar-icon">üì∫</span>
                        TV Shows
                    </div>
                    <div class="sidebar-item">
                        <span class="sidebar-icon">üéôÔ∏è</span>
                        Podcasts
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-header">Store</div>
                    <div class="sidebar-item">
                        <span class="sidebar-icon">üè™</span>
                        iTunes Store
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-header">Playlists</div>
                    <div class="sidebar-item">
                        <span class="sidebar-icon">üìã</span>
                        Party Shuffle
                    </div>
                    <div class="sidebar-item">
                        <span class="sidebar-icon">üéâ</span>
                        90's Music
                    </div>
                    <div class="sidebar-item">
                        <span class="sidebar-icon">‚≠ê</span>
                        Top 25 Most Played
                    </div>
                </div>
            </div>

            <div class="content-area">
                <div class="coverflow-container">
                    <div class="coverflow-stage" id="coverflowStage"></div>
                    <div class="coverflow-info" id="coverflowInfo">
                        <div class="album-title" id="albumTitle">Title</div>
                        <div class="album-artist" id="albumArtist">Artist</div>
                    </div>
                    <div class="coverflow-controls">
                        <div class="coverflow-nav" onclick="navigateLeft()">‚óÄ</div>
                        <div class="coverflow-nav" onclick="navigateRight()">‚ñ∂</div>
                    </div>
                </div>

                <div class="track-list">
                    <div class="track-list-header-container">
                        <div class="track-list-header" id="trackListHeader">
                            <div class="column-header col-name">Name</div>
                            <div class="column-header col-time">Time</div>
                            <div class="column-header col-artist">Artist</div>
                            <div class="column-header col-album">Album</div>
                            <div class="column-header col-genre">Genre</div>
                        </div>
                    </div>
                    <div class="track-list-body" id="trackListBody">
                        <!-- Tracks will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <div class="status-bar">
            <span id="statusText">243 items, 16.2 hours, 1.2 GB</span>
        </div>
    </div>

    <script src="albums.js"> </script>
    <script>
        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        let currentIndex = 2;
        let selectedTrack = 0;

        function createAlbumElement(album, index) {
            const albumDiv = document.createElement('div');
            albumDiv.className = 'album-cover';
            albumDiv.onclick = () => selectAlbum(index);
            
            const img = document.createElement('img');
            img.src = album.cover;
            img.alt = `${album.title} by ${album.artist}`;
            
            albumDiv.appendChild(img);
            
            return albumDiv;
        }

        function updateCoverflow() {
            const stage = document.getElementById('coverflowStage');
            stage.innerHTML = '';

            albums.forEach((album, index) => {
                const albumElement = createAlbumElement(album, index);
                const position = index - currentIndex;

                if (position === 0) {
                    albumElement.classList.add('active');
                } else if (position === -1) {
                    albumElement.classList.add('left-1');
                } else if (position === -2) {
                    albumElement.classList.add('left-2');
                } else if (position < -2) {
                    albumElement.classList.add('left-far');
                } else if (position === 1) {
                    albumElement.classList.add('right-1');
                } else if (position === 2) {
                    albumElement.classList.add('right-2');
                } else if (position > 2) {
                    albumElement.classList.add('right-far');
                }

                stage.appendChild(albumElement);
            });

            updateAlbumInfo();
            updateTrackList();
        }

        function updateAlbumInfo() {
            const title = document.getElementById('albumTitle');
            const artist = document.getElementById('albumArtist');
            
            if (title && artist && albums[currentIndex]) {
                title.textContent = albums[currentIndex].title;
                artist.textContent = albums[currentIndex].artist;
            }
        }

        function updateTrackList() {
            const tbody = document.getElementById('trackListBody');
            tbody.innerHTML = '';
            
            const currentAlbum = albums[currentIndex];
            currentAlbum.tracks.forEach((track, index) => {
                const row = document.createElement('div');
                row.className = `track-row ${index === selectedTrack ? 'selected' : ''}`;
                row.onclick = () => selectTrack(index);
                
                row.innerHTML = `
                    <div class="track-cell col-name">${track.name}</div>
                    <div class="track-cell col-time">${track.time}</div>
                    <div class="track-cell col-artist">${currentAlbum.artist}</div>
                    <div class="track-cell col-album">${currentAlbum.title}</div>
                    <div class="track-cell col-genre">${track.genre}</div>
                `;
                
                tbody.appendChild(row);
            });
        }

        function navigateLeft() {
            if (currentIndex > 0) {
                currentIndex--;
                selectedTrack = 0;
                updateCoverflow();
            }
        }

        function navigateRight() {
            if (currentIndex < albums.length - 1) {
                currentIndex++;
                selectedTrack = 0;
                updateCoverflow();
            }
        }

        function selectAlbum(index) {
            currentIndex = index;
            selectedTrack = 0;
            updateCoverflow();
        }

        function selectTrack(index) {
            selectedTrack = index;
            updateTrackList();
            // Ensure album info stays visible
            updateAlbumInfo();
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowLeft':
                    navigateLeft();
                    break;
                case 'ArrowRight':
                    navigateRight();
                    break;
                case 'ArrowUp':
                    if (selectedTrack > 0) {
                        selectTrack(selectedTrack - 1);
                    }
                    break;
                case 'ArrowDown':
                    if (selectedTrack < albums[currentIndex].tracks.length - 1) {
                        selectTrack(selectedTrack + 1);
                    }
                    break;
            }
        });

        // Initialize
        updateCoverflow();

        // Synchronize header and body scrolling
        const trackListBody = document.getElementById('trackListBody');
        const trackListHeaderContainer = document.querySelector('.track-list-header-container');

        trackListBody.addEventListener('scroll', function() {
            trackListHeaderContainer.scrollLeft = trackListBody.scrollLeft;
        });

        trackListHeaderContainer.addEventListener('scroll', function() {
            trackListBody.scrollLeft = trackListHeaderContainer.scrollLeft;
        });
    </script>
</body>
</html>